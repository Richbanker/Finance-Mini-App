<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover" />
    <meta name="theme-color" content="#000000" />
    <title>Finance Mini App</title>

    <!-- 1) Сплэш загружается первым -->
    <link rel="preload" as="image" href="/splash.png" />

    <!-- 2) Критичные стили сплэша инлайном -->
    <style>
      :root { 
        color-scheme: light dark; 
        --tg-theme-bg-color: #0b0b0b;
        --tg-theme-text-color: #ffffff;
      }
      
      #initial-splash {
        position: fixed;
        inset: 0;
        z-index: 99999;
        background: linear-gradient(135deg, #87CEEB 0%, #98E4D6 50%, #90EE90 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 1;
        transition: opacity 0.5s cubic-bezier(0.4, 0.0, 0.2, 1);
        overflow: hidden;
      }
      
      #initial-splash::before {
        content: '';
        position: absolute;
        inset: 0;
        background-image: url('/splash.png');
        background-position: center;
        background-size: cover;
        background-repeat: no-repeat;
        animation: splashFadeIn 0.8s ease-out;
      }
      
      /* Анимация появления сплэша */
      @keyframes splashFadeIn {
        from {
          opacity: 0;
          transform: scale(1.1);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }
      
      /* Адаптация под разные соотношения сторон */
      @media (max-aspect-ratio: 9/16) {
        #initial-splash::before {
          background-size: contain;
          background-position: center;
        }
      }
      
      @media (min-aspect-ratio: 16/9) {
        #initial-splash::before {
          background-size: contain;
          background-position: center;
        }
      }
      
      /* Для очень узких экранов */
      @media (max-width: 480px) {
        #initial-splash::before {
          background-size: cover;
          background-position: center top;
        }
      }
      
      /* Для планшетов в ландшафте */
      @media (min-width: 768px) and (max-height: 600px) {
        #initial-splash::before {
          background-size: contain;
          background-position: center;
        }
      }
      
      #initial-splash.hidden { 
        opacity: 0; 
        pointer-events: none; 
      }
      
      /* Предотвращаем скачки макета */
      body {
        margin: 0;
        padding: 0;
        overflow-x: hidden;
      }
    </style>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
  </head>
  <body>
    <!-- Статический сплэш — появляется мгновенно -->
    <div id="initial-splash" aria-hidden="true"></div>

    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
